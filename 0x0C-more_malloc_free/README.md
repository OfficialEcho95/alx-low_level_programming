Taking more malloc and free into consideration.
Solving more problems.
